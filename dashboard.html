<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://apis.google.com/js/api.js" async defer></script>
</head>
<body>
    <div class="tabs">
        <button onclick="showTab('input')">Nhập liệu</button>
        <button onclick="showTab('report')">Thống kê & Báo cáo</button>
        <button onclick="logout()">Đăng xuất</button>
    </div>
    <div id="input" class="tab-content" style="display: block;">
        <h2>Nhập liệu giao dịch</h2>
        <form id="transactionForm">
            <div class="form-row">
                <div class="form-group">
                    <label for="transactionType">Loại giao dịch</label>
                    <select id="transactionType" required>
                        <option value="" disabled selected>Chọn loại giao dịch</option>
                        <option value="Mua hàng">Mua hàng</option>
                        <option value="Đổi gói">Đổi gói</option>
                        <option value="Hoàn trả">Hoàn trả</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="customerName">Tên khách hàng</label>
                    <input type="text" id="customerName" placeholder="Tên khách hàng" list="customerList" required>
                    <datalist id="customerList"></datalist>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="Email" list="emailList" required>
                    <datalist id="emailList"></datalist>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="contact">Liên hệ</label>
                    <input type="text" id="contact" placeholder="Liên hệ" required>
                </div>
                <div class="form-group">
                    <label for="months">Số tháng đăng ký</label>
                    <input type="number" id="months" placeholder="Số tháng" min="1" required>
                </div>
                <div class="form-group">
                    <label for="startDate">Ngày bắt đầu</label>
                    <input type="text" id="startDate" placeholder="dd/mm/yyyy" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="endDate">Ngày kết thúc</label>
                    <input type="text" id="endDate" placeholder="Ngày kết thúc" readonly>
                </div>
                <div class="form-group">
                    <label for="devices">Số thiết bị</label>
                    <input type="number" id="devices" placeholder="Số thiết bị" min="1" required>
                </div>
                <div class="form-group">
                    <label for="software">Phần mềm</label>
                    <select id="software" required>
                        <option value="" disabled selected>Chọn phần mềm</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="package">Gói phần mềm</label>
                    <select id="package" required>
                        <option value="" disabled selected>Chọn gói phần mềm</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="revenue">Doanh thu</label>
                    <input type="number" id="revenue" placeholder="Doanh thu" min="0" required>
                </div>
                <div class="form-group">
                    <label for="image">Hình ảnh</label>
                    <input type="file" id="image" accept="image/*">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group full-width">
                    <label for="note">Ghi chú</label>
                    <textarea id="note" placeholder="Ghi chú"></textarea>
                </div>
            </div>
            <div class="form-row">
                <button type="button" onclick="addTransaction()">Thêm giao dịch</button>
                <button type="button" onclick="updateTransaction()" id="updateBtn" style="display: none;">Sửa</button>
                <button type="button" onclick="confirmDelete(currentTransactionId)" id="deleteBtn" style="display: none;">Xóa</button>
                <button type="button" onclick="searchTransactions()">Tìm kiếm</button>
            </div>
        </form>
        <h3>Danh sách giao dịch</h3>
        <div id="transactionList"></div>
        <div id="pagination"></div>
    </div>
    <div id="report" class="tab-content" style="display: none;">
        <h2>Thống kê & Báo cáo</h2>
        <p>Chào mừng bạn đến với tab thống kê!</p>
    </div>
    <script src="script.js"></script>
    <script>
        const loggedInEmployee = JSON.parse(localStorage.getItem("loggedInEmployee"));
        if (!loggedInEmployee) {
            window.location.href = "index.html";
        } else {
            gapi.load('client:auth2', initClient);
            loadSoftwareOptions();
            loadTransactions();
        }
    </script>
</body>
</html>
