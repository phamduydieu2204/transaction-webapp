<!-- Cash Flow vs Chi ph√≠ ph√¢n b·ªï Report -->
<div class="cashflow-accrual-container">
  <!-- Header Section -->
  <div class="page-header">
    <h2>‚öñÔ∏è Cash Flow vs Chi ph√≠ ph√¢n b·ªï</h2>
    <div class="header-actions">
      <button class="btn-refresh" id="refresh-cashflow-data">
        <i class="fas fa-sync-alt"></i> L√†m m·ªõi
      </button>
      <button class="export-cashflow-btn" data-format="csv">
        <i class="fas fa-download"></i> Xu·∫•t CSV
      </button>
      <button class="export-cashflow-btn" data-format="excel">
        <i class="fas fa-file-excel"></i> Xu·∫•t Excel
      </button>
    </div>
  </div>

  <!-- Loading and Error States -->
  <div class="cashflow-loading" style="display: none;">
    <div class="loading-spinner">üîÑ ƒêang ph√¢n t√≠ch d·ªØ li·ªáu Cash Flow...</div>
  </div>
  
  <div class="cashflow-error" style="display: none;">
    <div class="error-message">‚ùå Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu Cash Flow</div>
  </div>

  <!-- Comparison Overview -->
  <div class="comparison-overview">
    <div class="overview-cards">
      <div class="overview-card cash-flow-card">
        <div class="card-icon">üí∞</div>
        <div class="card-content">
          <h3>Cash Flow (Th·ª±c t·∫ø)</h3>
          <div class="card-value" id="cash-flow-total">0 ‚Ç´</div>
          <div class="card-description">Ti·ªÅn th·ª±c t·∫ø ra v√†o</div>
        </div>
      </div>
      
      <div class="overview-card accrual-card">
        <div class="card-icon">üìä</div>
        <div class="card-content">
          <h3>Chi ph√≠ ph√¢n b·ªï</h3>
          <div class="card-value" id="accrual-total">0 ‚Ç´</div>
          <div class="card-description">Chi ph√≠ ƒë∆∞·ª£c ph√¢n b·ªï theo k·ª≥</div>
        </div>
      </div>
      
      <div class="overview-card difference-card">
        <div class="card-icon">‚ö°</div>
        <div class="card-content">
          <h3>Ch√™nh l·ªách</h3>
          <div class="card-value" id="difference-total">0 ‚Ç´</div>
          <div class="card-description" id="difference-percentage">0%</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Comparison Charts -->
  <div class="comparison-charts-section">
    <h3>üìà Bi·ªÉu ƒë·ªì so s√°nh</h3>
    
    <div class="charts-grid">
      <!-- Monthly Comparison Chart -->
      <div class="chart-container">
        <div class="chart-header">
          <h4>üìÖ So s√°nh theo th√°ng</h4>
          <div class="chart-controls">
            <button class="chart-toggle-btn" data-chart="monthlyComparisonChart">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
        <canvas id="monthlyComparisonChart" width="400" height="250"></canvas>
      </div>

      <!-- Category Comparison Chart -->
      <div class="chart-container">
        <div class="chart-header">
          <h4>üè∑Ô∏è So s√°nh theo danh m·ª•c</h4>
          <div class="chart-controls">
            <button class="chart-toggle-btn" data-chart="categoryComparisonChart">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
        <canvas id="categoryComparisonChart" width="400" height="250"></canvas>
      </div>

      <!-- Cumulative Flow Chart -->
      <div class="chart-container">
        <div class="chart-header">
          <h4>üìä D√≤ng ti·ªÅn t√≠ch l≈©y</h4>
          <div class="chart-controls">
            <button class="chart-toggle-btn" data-chart="cumulativeFlowChart">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
        <canvas id="cumulativeFlowChart" width="400" height="250"></canvas>
      </div>

      <!-- Difference Analysis Chart -->
      <div class="chart-container">
        <div class="chart-header">
          <h4">‚öñÔ∏è Ph√¢n t√≠ch ch√™nh l·ªách</h4>
          <div class="chart-controls">
            <button class="chart-toggle-btn" data-chart="differenceAnalysisChart">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
        <canvas id="differenceAnalysisChart" width="400" height="250"></canvas>
      </div>
    </div>
  </div>

  <!-- Detailed Analysis Tables -->
  <div class="analysis-tables-section">
    <h3>üìã Ph√¢n t√≠ch chi ti·∫øt</h3>
    
    <!-- Monthly Analysis Table -->
    <div class="table-section">
      <h4>üìÖ Ph√¢n t√≠ch theo th√°ng</h4>
      <div class="monthly-analysis-table-container">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Th√°ng</th>
              <th>Cash Flow</th>
              <th>Chi ph√≠ ph√¢n b·ªï</th>
              <th>Ch√™nh l·ªách</th>
              <th>T·ª∑ l·ªá (%)</th>
              <th>Tr·∫°ng th√°i</th>
            </tr>
          </thead>
          <tbody id="monthly-analysis-tbody">
            <!-- Data will be populated here -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Category Analysis Table -->
    <div class="table-section">
      <h4>üè∑Ô∏è Ph√¢n t√≠ch theo danh m·ª•c</h4>
      <div class="category-analysis-table-container">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Danh m·ª•c</th>
              <th>Cash Flow</th>
              <th>Chi ph√≠ ph√¢n b·ªï</th>
              <th>Ch√™nh l·ªách</th>
              <th>T·ª∑ l·ªá (%)</th>
              <th>Ghi ch√∫</th>
            </tr>
          </thead>
          <tbody id="category-analysis-tbody">
            <!-- Data will be populated here -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Insights and Recommendations -->
  <div class="insights-section">
    <h3>üí° Ph√¢n t√≠ch v√† khuy·∫øn ngh·ªã</h3>
    
    <div class="insights-grid">
      <!-- Cash Flow Insights -->
      <div class="insight-card">
        <div class="insight-header">
          <h4>üí∞ Cash Flow Analysis</h4>
        </div>
        <div class="insight-content" id="cash-flow-insights">
          <!-- Insights will be populated here -->
        </div>
      </div>

      <!-- Accrual Insights -->
      <div class="insight-card">
        <div class="insight-header">
          <h4>üìä Accrual Analysis</h4>
        </div>
        <div class="insight-content" id="accrual-insights">
          <!-- Insights will be populated here -->
        </div>
      </div>

      <!-- Recommendations -->
      <div class="insight-card">
        <div class="insight-header">
          <h4>üéØ Khuy·∫øn ngh·ªã</h4>
        </div>
        <div class="insight-content" id="recommendations">
          <!-- Recommendations will be populated here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Filter Controls -->
  <div class="filter-controls-section">
    <h3>üîç B·ªô l·ªçc</h3>
    
    <div class="filters-grid">
      <!-- Date Range Filter -->
      <div class="filter-group">
        <label>üìÖ Kho·∫£ng th·ªùi gian:</label>
        <div class="date-range-inputs">
          <input type="date" id="cashflow-start-date" class="cashflow-date-input">
          <span>ƒë·∫øn</span>
          <input type="date" id="cashflow-end-date" class="cashflow-date-input">
        </div>
      </div>

      <!-- Category Filter -->
      <div class="filter-group">
        <label>üè∑Ô∏è Danh m·ª•c:</label>
        <div class="category-filter-options" id="category-filter-options">
          <!-- Category checkboxes will be populated here -->
        </div>
      </div>

      <!-- View Mode Filter -->
      <div class="filter-group">
        <label>üëÅÔ∏è Ch·∫ø ƒë·ªô xem:</label>
        <select id="view-mode-selector" class="filter-select">
          <option value="both">C·∫£ hai ph∆∞∆°ng ph√°p</option>
          <option value="cashflow">Ch·ªâ Cash Flow</option>
          <option value="accrual">Ch·ªâ Chi ph√≠ ph√¢n b·ªï</option>
          <option value="difference">Ch·ªâ Ch√™nh l·ªách</option>
        </select>
      </div>

      <!-- Granularity Filter -->
      <div class="filter-group">
        <label>üìä M·ª©c ƒë·ªô chi ti·∫øt:</label>
        <select id="granularity-selector" class="filter-select">
          <option value="monthly">Theo th√°ng</option>
          <option value="weekly">Theo tu·∫ßn</option>
          <option value="daily">Theo ng√†y</option>
          <option value="quarterly">Theo qu√Ω</option>
        </select>
      </div>
    </div>

    <div class="filter-actions">
      <button class="btn-apply-filters" id="apply-cashflow-filters">
        <i class="fas fa-filter"></i> √Åp d·ª•ng b·ªô l·ªçc
      </button>
      <button class="btn-reset-filters" id="reset-cashflow-filters">
        <i class="fas fa-undo"></i> ƒê·∫∑t l·∫°i
      </button>
    </div>
  </div>

  <!-- Allocation Details -->
  <div class="allocation-details-section">
    <h3>üìã Chi ti·∫øt ph√¢n b·ªï</h3>
    
    <div class="allocation-details-content">
      <!-- Large Expenses Allocation -->
      <div class="allocation-group">
        <h4>üí≥ Chi ph√≠ l·ªõn ƒë∆∞·ª£c ph√¢n b·ªï</h4>
        <div class="large-expenses-container" id="large-expenses-container">
          <!-- Large expenses will be populated here -->
        </div>
      </div>

      <!-- Recurring Allocations -->
      <div class="allocation-group">
        <h4>üîÑ Chi ph√≠ ƒë·ªãnh k·ª≥</h4>
        <div class="recurring-allocations-container" id="recurring-allocations-container">
          <!-- Recurring allocations will be populated here -->
        </div>
      </div>

      <!-- Prepaid Allocations -->
      <div class="allocation-group">
        <h4">‚è∞ Chi ph√≠ tr·∫£ tr∆∞·ªõc</h4>
        <div class="prepaid-allocations-container" id="prepaid-allocations-container">
          <!-- Prepaid allocations will be populated here -->
        </div>
      </div>
    </div>
  </div>
</div>