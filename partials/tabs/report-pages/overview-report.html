<!-- Overview Report - Tổng quan kinh doanh -->
<div class="report-header">
    <h2 class="report-title">
      <i class="fas fa-chart-line"></i> 
      Tổng quan kinh doanh
    </h2>
    <div class="report-subtitle">
      <span id="overview-period-display">Tháng này</span>
      <span class="refresh-status" id="overview-refresh-status">
        <i class="fas fa-sync-alt"></i> Đã cập nhật
      </span>
    </div>
  </div>

  <!-- KPI Cards -->
  <div class="kpi-grid">
    <!-- Doanh thu gộp (Đã hoàn tất - Hoàn tiền) -->
    <div class="kpi-card revenue-card">
      <div class="kpi-icon">
        <i class="fas fa-chart-line"></i>
      </div>
      <div class="kpi-content">
        <div class="kpi-label">Doanh thu gộp</div>
        <div class="kpi-value" id="completed-revenue">0 ₫</div>
        <div class="kpi-change" id="completed-change">
          <i class="fas fa-arrow-up"></i> +0%
        </div>
        <div class="kpi-sub-label">Đã hoàn tất - Hoàn tiền</div>
      </div>
    </div>

    <!-- Tiền đang chờ thu (Chưa thanh toán) -->
    <div class="kpi-card pending-collection-card">
      <div class="kpi-icon">
        <i class="fas fa-hourglass-half"></i>
      </div>
      <div class="kpi-content">
        <div class="kpi-label">Tiền đang chờ thu</div>
        <div class="kpi-value" id="paid-revenue">0 ₫</div>
        <div class="kpi-change" id="paid-change">
          <i class="fas fa-arrow-up"></i> +0%
        </div>
        <div class="kpi-sub-label">Chưa thanh toán</div>
      </div>
    </div>

    <!-- Tiền đang chờ chi (Đã thanh toán) -->
    <div class="kpi-card pending-payment-card">
      <div class="kpi-icon">
        <i class="fas fa-clock"></i>
      </div>
      <div class="kpi-content">
        <div class="kpi-label">Tiền đang chờ chi</div>
        <div class="kpi-value" id="unpaid-revenue">0 ₫</div>
        <div class="kpi-change" id="unpaid-change">
          <i class="fas fa-arrow-up"></i> +0%
        </div>
        <div class="kpi-sub-label">Đã thanh toán</div>
      </div>
    </div>

    <!-- Tổng tiền hoàn trả -->
    <div class="kpi-card refund-card">
      <div class="kpi-icon">
        <i class="fas fa-undo-alt"></i>
      </div>
      <div class="kpi-content">
        <div class="kpi-label">Tổng tiền hoàn trả</div>
        <div class="kpi-value" id="refund-revenue">0 ₫</div>
        <div class="kpi-change" id="refund-change">
          <i class="fas fa-arrow-up"></i> +0%
        </div>
        <div class="kpi-sub-label">Hoàn tiền</div>
      </div>
    </div>

    <!-- Tỷ lệ hoàn tiền -->
    <div class="kpi-card refund-rate-card">
      <div class="kpi-icon">
        <i class="fas fa-percentage"></i>
      </div>
      <div class="kpi-content">
        <div class="kpi-label">Tỷ lệ hoàn tiền</div>
        <div class="kpi-value" id="refund-rate">0.00%</div>
        <div class="kpi-change" id="refund-rate-change">
          <i class="fas fa-arrow-up"></i> +0%
        </div>
        <div class="kpi-sub-label">Tỷ lệ giao dịch hoàn tiền</div>
      </div>
    </div>

    <!-- Tổng giao dịch có hiệu lực -->
    <div class="kpi-card transaction-card">
      <div class="kpi-icon">
        <i class="fas fa-handshake"></i>
      </div>
      <div class="kpi-content">
        <div class="kpi-label">Giao dịch có hiệu lực</div>
        <div class="kpi-value" id="total-transactions">0</div>
        <div class="kpi-change" id="transaction-change">
          <i class="fas fa-arrow-up"></i> +0%
        </div>
        <div class="kpi-sub-label">Không bao gồm đã hủy</div>
      </div>
    </div>
  </div>


  <!-- Status Details Section -->
  <div class="status-details-section">
    <div class="chart-container">
      <div class="chart-header">
        <h3 class="chart-title">
          <i class="fas fa-table"></i> 
          Chi tiết theo trạng thái
        </h3>
        <div class="chart-actions">
          <button class="chart-btn" onclick="exportStatusData()">
            <i class="fas fa-download"></i> Xuất
          </button>
        </div>
      </div>
      <div class="status-detail-content">
        <table class="status-detail-table">
          <thead>
            <tr>
              <th>Trạng thái</th>
              <th>Số lượng</th>
              <th>Tổng tiền</th>
              <th>Tỷ lệ</th>
              <th>Trung bình</th>
            </tr>
          </thead>
          <tbody id="status-detail-tbody">
            <tr>
              <td colspan="5" class="loading-row">
                <i class="fas fa-spinner fa-spin"></i> Đang tải...
              </td>
            </tr>
          </tbody>
        </table>
        
      </div>
    </div>
  </div>

  <!-- Data Tables Row -->
  <div class="tables-row">
    <!-- Top Customers -->
    <div class="data-table-container top-customers-enhanced">
      <div class="table-header">
        <h3 class="table-title">
          <i class="fas fa-users"></i> 
          Top Khách hàng theo Doanh thu
        </h3>
        <div class="table-controls">
          <div class="view-toggle">
            <button class="toggle-btn active" data-view="revenue" title="Sắp xếp theo doanh thu">
              <i class="fas fa-dollar-sign"></i>
            </button>
            <button class="toggle-btn" data-view="quantity" title="Sắp xếp theo số lượng">
              <i class="fas fa-sort-numeric-down"></i>
            </button>
            <button class="toggle-btn" data-view="avg" title="Sắp xếp theo giá trị trung bình">
              <i class="fas fa-chart-line"></i>
            </button>
          </div>
          <button class="table-btn" onclick="exportCustomerData()">
            <i class="fas fa-download"></i> Xuất
          </button>
        </div>
      </div>
      <div class="table-content">
        <div class="table-summary">
          <div class="summary-stats">
            <div class="stat-item">
              <span class="stat-label">Tổng khách hàng:</span>
              <span class="stat-value" id="total-customers">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Doanh thu trung bình:</span>
              <span class="stat-value" id="avg-customer-revenue">0 ₫</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Top 5 chiếm:</span>
              <span class="stat-value" id="top5-percentage">0%</span>
            </div>
          </div>
        </div>
        <table class="data-table enhanced-table" id="top-customers-table">
          <thead>
            <tr>
              <th class="rank-col">#</th>
              <th class="customer-col">Khách hàng</th>
              <th class="transactions-col">Giao dịch</th>
              <th class="revenue-col">Tổng doanh thu</th>
              <th class="avg-col">Giá trị TB</th>
              <th class="percentage-col">% Tổng</th>
              <th class="trend-col">Xu hướng</th>
              <th class="action-col">Thêm</th>
            </tr>
          </thead>
          <tbody id="top-customers-body">
            <tr>
              <td colspan="8" class="loading-row">
                <i class="fas fa-spinner fa-spin"></i> Đang tải...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Top Software -->
    <div class="data-table-container top-software-enhanced">
      <div class="table-header">
        <h3 class="table-title">
          <i class="fas fa-laptop-code"></i> 
          Sản phẩm Bán chạy nhất
        </h3>
        <div class="table-controls">
          <div class="view-toggle">
            <button class="toggle-btn active" data-view="bestseller" title="Sắp xếp theo số lượng bán">
              <i class="fas fa-fire"></i>
            </button>
            <button class="toggle-btn" data-view="revenue" title="Sắp xếp theo doanh thu">
              <i class="fas fa-dollar-sign"></i>
            </button>
            <button class="toggle-btn" data-view="growth" title="Sắp xếp theo tăng trưởng">
              <i class="fas fa-trending-up"></i>
            </button>
          </div>
          <button class="table-btn" onclick="exportSoftwareData()">
            <i class="fas fa-download"></i> Xuất
          </button>
        </div>
      </div>
      <div class="table-content">
        <div class="table-summary">
          <div class="summary-stats">
            <div class="stat-item">
              <span class="stat-label">Tổng sản phẩm:</span>
              <span class="stat-value" id="total-products">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Sản phẩm hót nhất:</span>
              <span class="stat-value" id="hottest-product">N/A</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Top 3 chiếm:</span>
              <span class="stat-value" id="top3-market-share">0%</span>
            </div>
          </div>
        </div>
        <table class="data-table enhanced-table" id="top-software-table">
          <thead>
            <tr>
              <th class="rank-col">#</th>
              <th class="product-col">Sản phẩm / Phần mềm</th>
              <th class="quantity-col">Số bán</th>
              <th class="revenue-col">Doanh thu</th>
              <th class="avg-price-col">Giá TB</th>
              <th class="market-share-col">Thị phần</th>
              <th class="performance-col">Hiệu suất</th>
              <th class="action-col">Chi tiết</th>
            </tr>
          </thead>
          <tbody id="top-software-body">
            <tr>
              <td colspan="8" class="loading-row">
                <i class="fas fa-spinner fa-spin"></i> Đang tải...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- Pending Transactions Section -->
  <div class="pending-transactions-section">
    <div class="section-header">
      <h3 class="section-title">
        <i class="fas fa-exclamation-circle"></i> 
        Giao dịch cần xử lý
      </h3>
      <div class="section-summary">
        <span class="summary-badge needs-delivery" id="needs-delivery-count">
          <i class="fas fa-truck"></i> Cần giao hàng: <strong>0</strong>
        </span>
        <span class="summary-badge needs-payment" id="needs-payment-count">
          <i class="fas fa-money-bill-wave"></i> Cần thu tiền: <strong>0</strong>
        </span>
      </div>
    </div>
    
    <div class="pending-tables-row">
      <!-- Needs Delivery: Paid but not completed -->
      <div class="pending-table-container needs-delivery-container">
        <div class="pending-table-header">
          <h4 class="pending-table-title">
            <i class="fas fa-truck"></i> 
            Đã thanh toán - Cần giao hàng
          </h4>
          <div class="pending-table-controls">
            <span class="priority-indicator high">
              <i class="fas fa-exclamation-triangle"></i> Ưu tiên cao
            </span>
            <button class="table-btn" onclick="exportNeedsDelivery()">
              <i class="fas fa-download"></i> Xuất
            </button>
          </div>
        </div>
        <div class="pending-table-content">
          <table class="pending-table" id="needs-delivery-table">
            <thead>
              <tr>
                <th>Ngày</th>
                <th>Khách hàng</th>
                <th>Sản phẩm</th>
                <th>Số tiền</th>
                <th>Thời gian chờ</th>
                <th>Hành động</th>
              </tr>
            </thead>
            <tbody id="needs-delivery-tbody">
              <tr>
                <td colspan="6" class="loading-row">
                  <i class="fas fa-spinner fa-spin"></i> Đang tải...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Needs Payment: Delivered but not paid -->
      <div class="pending-table-container needs-payment-container">
        <div class="pending-table-header">
          <h4 class="pending-table-title">
            <i class="fas fa-money-bill-wave"></i> 
            Đã giao hàng - Cần thu tiền
          </h4>
          <div class="pending-table-controls">
            <span class="priority-indicator medium">
              <i class="fas fa-clock"></i> Theo dõi
            </span>
            <button class="table-btn" onclick="exportNeedsPayment()">
              <i class="fas fa-download"></i> Xuất
            </button>
          </div>
        </div>
        <div class="pending-table-content">
          <table class="pending-table" id="needs-payment-table">
            <thead>
              <tr>
                <th>Ngày giao</th>
                <th>Khách hàng</th>
                <th>Sản phẩm</th>
                <th>Số tiền</th>
                <th>Quá hạn</th>
                <th>Hành động</th>
              </tr>
            </thead>
            <tbody id="needs-payment-tbody">
              <tr>
                <td colspan="6" class="loading-row">
                  <i class="fas fa-spinner fa-spin"></i> Đang tải...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Quick Actions Panel -->
    <div class="quick-actions-panel">
      <div class="action-group">
        <h5 class="action-group-title">
          <i class="fas fa-bolt"></i> Hành động nhanh
        </h5>
        <div class="action-buttons">
          <button class="action-btn delivery" onclick="markAllAsDelivered()">
            <i class="fas fa-check-circle"></i> Đánh dấu đã giao hàng
          </button>
          <button class="action-btn payment" onclick="markAllAsPaid()">
            <i class="fas fa-money-check-alt"></i> Đánh dấu đã thanh toán
          </button>
          <button class="action-btn reminder" onclick="sendPaymentReminders()">
            <i class="fas fa-bell"></i> Gửi nhắc nhở thanh toán
          </button>
        </div>
      </div>
      
      <div class="alert-group">
        <div class="alert-item overdue" id="overdue-alert" style="display: none;">
          <i class="fas fa-exclamation-triangle"></i>
          <span class="alert-text">Có <strong id="overdue-count">0</strong> giao dịch quá hạn thanh toán!</span>
          <button class="alert-btn" onclick="showOverdueDetails()">
            <i class="fas fa-eye"></i> Xem chi tiết
          </button>
        </div>
        
        <div class="alert-item urgent" id="urgent-alert" style="display: none;">
          <i class="fas fa-shipping-fast"></i>
          <span class="alert-text">Có <strong id="urgent-delivery-count">0</strong> đơn hàng cần giao gấp!</span>
          <button class="alert-btn" onclick="showUrgentDeliveries()">
            <i class="fas fa-truck-fast"></i> Xử lý ngay
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Export Controls -->
  <div class="report-actions">
    <button class="action-btn primary" onclick="exportOverviewReport()">
      <i class="fas fa-file-excel"></i> Xuất báo cáo Excel
    </button>
    <button class="action-btn secondary" onclick="printOverviewReport()">
      <i class="fas fa-print"></i> In báo cáo
    </button>
    <button class="action-btn secondary" onclick="refreshOverviewReport()">
      <i class="fas fa-sync-alt"></i> Làm mới
    </button>
  </div>