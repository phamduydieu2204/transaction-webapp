<!-- Tab thống kê HTML structure -->
<div id="tab-thong-ke" class="tab-content">
  <div class="statistics-header">
    <h2>📊 Dashboard Thống Kê</h2>
    <div class="time-filter">
      <label>Khoảng thời gian:</label>
      <select id="statsTimeFilter">
        <option value="today">Hôm nay</option>
        <option value="week">7 ngày qua</option>
        <option value="month" selected>Tháng này</option>
        <option value="quarter">Quý này</option>
        <option value="year">Năm này</option>
        <option value="custom">Tùy chọn</option>
      </select>
      <div id="customDateRange" style="display: none;">
        <input type="text" id="statsFromDate" placeholder="yyyy/mm/dd">
        <span>đến</span>
        <input type="text" id="statsToDate" placeholder="yyyy/mm/dd">
        <button onclick="window.applyCustomDateFilter()">Áp dụng</button>
      </div>
    </div>
  </div>

  <!-- KPI Cards Section -->
  <div class="kpi-cards">
    <div class="kpi-card revenue">
      <div class="kpi-icon">💰</div>
      <div class="kpi-content">
        <h3>Tổng Doanh Thu</h3>
        <div class="kpi-value" id="totalRevenue">0 VNĐ</div>
        <div class="kpi-change" id="revenueChange">+0%</div>
      </div>
    </div>

    <div class="kpi-card expense">
      <div class="kpi-icon">💸</div>
      <div class="kpi-content">
        <h3>Tổng Chi Phí</h3>
        <div class="kpi-value" id="totalExpense">0 VNĐ</div>
        <div class="kpi-change" id="expenseChange">+0%</div>
      </div>
    </div>

    <div class="kpi-card profit">
      <div class="kpi-icon">📈</div>
      <div class="kpi-content">
        <h3>Lợi Nhuận</h3>
        <div class="kpi-value" id="totalProfit">0 VNĐ</div>
        <div class="kpi-change" id="profitChange">+0%</div>
      </div>
    </div>

    <div class="kpi-card transactions">
      <div class="kpi-icon">🛒</div>
      <div class="kpi-content">
        <h3>Số Giao Dịch</h3>
        <div class="kpi-value" id="totalTransactions">0</div>
        <div class="kpi-change" id="transactionsChange">+0%</div>
      </div>
    </div>
  </div>

  <!-- Charts Row 1 -->
  <div class="charts-row">
    <div class="chart-container half-width">
      <h3>📊 Doanh Thu Theo Thời Gian</h3>
      <canvas id="revenueTimeChart"></canvas>
    </div>
    <div class="chart-container half-width">
      <h3>🥧 Doanh Thu Theo Phần Mềm</h3>
      <canvas id="softwareRevenueChart"></canvas>
    </div>
  </div>

  <!-- Charts Row 2 -->
  <div class="charts-row">
    <div class="chart-container half-width">
      <h3>💸 Chi Phí Theo Danh Mục</h3>
      <canvas id="expenseCategoryChart"></canvas>
    </div>
    <div class="chart-container half-width">
      <h3>📈 Lợi Nhuận Theo Tháng</h3>
      <canvas id="profitTrendChart"></canvas>
    </div>
  </div>

  <!-- Tables Section -->
  <div class="statistics-tables">
    <!-- Top Software Table -->
    <div class="stats-table-container">
      <h3>🏆 Top Phần Mềm Bán Chạy</h3>
      <table id="topSoftwareTable" class="stats-table">
        <thead>
          <tr>
            <th>Hạng</th>
            <th>Phần Mềm</th>
            <th>Số Bán</th>
            <th>Doanh Thu</th>
            <th>% Tổng</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Monthly Summary Table -->
    <div class="stats-table-container">
      <h3>📅 Tổng Hợp Theo Tháng</h3>
      <table id="monthlySummaryTable" class="stats-table">
        <thead>
          <tr>
            <th>Tháng</th>
            <th>Doanh Thu</th>
            <th>Chi Phí</th>
            <th>Lợi Nhuận</th>
            <th>Số GD</th>
            <th>TB/GD</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Employee Performance Table -->
    <div class="stats-table-container">
      <h3>👥 Hiệu Suất Nhân Viên</h3>
      <table id="employeeStatsTable" class="stats-table">
        <thead>
          <tr>
            <th>Nhân Viên</th>
            <th>Số GD</th>
            <th>Doanh Thu</th>
            <th>TB/GD</th>
            <th>% Tổng</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Expense by Category Table -->
    <div class="stats-table-container">
      <h3>🏷️ Chi Phí Theo Danh Mục</h3>
      <table id="expenseByCategoryTable" class="stats-table">
        <thead>
          <tr>
            <th>Danh Mục</th>
            <th>Số Khoản</th>
            <th>Tổng Tiền</th>
            <th>TB/Khoản</th>
            <th>% Tổng</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Customer Analytics -->
  <div class="customer-analytics">
    <h3>👤 Phân Tích Khách Hàng</h3>
    <div class="charts-row">
      <div class="chart-container third-width">
        <h4>🆕 Khách Hàng Mới/Cũ</h4>
        <canvas id="customerTypeChart"></canvas>
      </div>
      <div class="chart-container third-width">
        <h4>🔄 Tần Suất Mua Hàng</h4>
        <canvas id="purchaseFrequencyChart"></canvas>
      </div>
      <div class="chart-container third-width">
        <h4>💎 Giá Trị Khách Hàng</h4>
        <canvas id="customerValueChart"></canvas>
      </div>
    </div>
  </div>

  <!-- Export Controls -->
  <div class="export-controls">
    <h3>📤 Xuất Báo Cáo</h3>
    <div class="export-buttons">
      <button onclick="window.exportStatsToPDF()" class="export-btn pdf">
        📄 Xuất PDF
      </button>
      <button onclick="window.exportStatsToExcel()" class="export-btn excel">
        📊 Xuất Excel
      </button>
      <button onclick="window.exportStatsToCSV()" class="export-btn csv">
        📋 Xuất CSV
      </button>
      <button onclick="window.printStats()" class="export-btn print">
        🖨️ In Báo Cáo
      </button>
    </div>
  </div>
</div>